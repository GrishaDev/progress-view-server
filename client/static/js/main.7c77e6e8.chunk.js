(this["webpackJsonpprogress-view"]=this["webpackJsonpprogress-view"]||[]).push([[0],{236:function(e,a,t){e.exports=t(366)},241:function(e,a,t){},34:function(e,a,t){},366:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(16),i=t.n(l),o=(t(241),t(34),t(217)),s=t(69),c=t(29),p=t.n(c),u=t(26),h=t(367),g=t(422),d=t(410),m=t(99),y=t.n(m),f="";function v(e){var a=r.a.useState(!0),t=Object(u.a)(a,2),n=t[0],l=t[1];function i(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.awrap(y.a.post("/api/auth",{user:f}));case 3:e.sent.status?window.location.href="/app":alert("error"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("error");case 10:case"end":return e.stop()}}),null,null,[[0,7]])}return r.a.useEffect((function(){document.title="Login"})),r.a.createElement("div",{className:"login-page"},r.a.createElement(h.a,{className:"login-paper"},r.a.createElement("div",{className:"login-content"},r.a.createElement(g.a,{label:"Name",variant:"outlined",fullWidth:!0,onKeyDown:function(e){13===e.keyCode&&f.length>0&&i()},onChange:function(e){0===(f=e.target.value).length?l(!0):l(!1)},autoFocus:!0})),r.a.createElement("div",{className:"login-actions"},r.a.createElement(d.a,{variant:"contained",color:"primary",disabled:n,onClick:i},"Enter"))))}var b=t(20),E=t(17),C=t(23),k=t(24),w=t(22),x=t(25),O=t(416),j=t(417),N=t(222),S=t(220),G=t(433),T=t(425),D=t(430),L=t(415),V=t(412),H=t(413),U=t(411),W="",A="",F="",M=!0,_=function(e){function a(e){var t;return Object(b.a)(this,a),(t=Object(C.a)(this,Object(k.a)(a).call(this,e))).state={categoryHelper:"",categoryError:!1,graphHelper:"",graphError:!1},t}return Object(x.a)(a,e),Object(E.a)(a,[{key:"onCategorySelect",value:function(e,a){null!=a?(this.setState({categoryHelper:"",categoryError:!1}),W=a,M=!this.isValid()):(M=!0,W="")}},{key:"onChangeCategory",value:function(e){e.target.value.length>0?(this.setState({categoryHelper:"",categoryError:!1}),M=!1,W=e.target.value,M=!this.isValid()):(this.setState({categoryHelper:"give it a name",categoryError:!0}),M=!0,W="")}},{key:"onChangeGraph",value:function(e){e.target.value.length>0?(this.setState({graphHelper:"",graphError:!1}),A=e.target.value,M=!this.isValid()):(this.setState({graphHelper:"give it a name",graphError:!0}),M=!0,A="")}},{key:"isValid",value:function(){return W.length>0&&A.length>0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(D.a,{open:this.props.open,onClose:this.props.dialogClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(U.a,{id:"form-dialog-title"},"Add graph"),r.a.createElement(V.a,{className:"graph-add-content"},r.a.createElement(H.a,null,"Make a new graph"),r.a.createElement(T.a,{id:"category",options:this.props.categories,getOptionLabel:function(e){return e},style:{padding:"0 0 30px 0"},freeSolo:!0,onChange:this.onCategorySelect.bind(this),renderInput:function(a){return r.a.createElement(g.a,Object.assign({},a,{required:!0,label:"Category",variant:"outlined",fullWidth:!0,error:e.state.categoryError,helperText:e.state.categoryHelper,onChange:e.onChangeCategory.bind(e)}))}}),r.a.createElement(g.a,{required:!0,label:"Graph",variant:"outlined",fullWidth:!0,style:{padding:"0 0 30px 0"},error:this.state.graphError,helperText:this.state.graphHelper,onChange:this.onChangeGraph.bind(this)}),r.a.createElement(g.a,{label:"type",variant:"outlined",fullWidth:!0,helperText:"example: kg, minutes",onChange:function(e){return F=e.target.value}})),r.a.createElement(L.a,null,r.a.createElement(d.a,{onClick:this.props.dialogClose,color:"primary"},"nah"),r.a.createElement(d.a,{onClick:function(){return e.props.newGraph(W,A,F)},disabled:M,color:"primary"},"Create"))))}}]),a}(r.a.Component),B=t(204),I=t.n(B);var J,q=function(e){var a,t=r.a.useState(null),n=Object(u.a)(t,2),l=n[0],i=n[1],o=r.a.useState(!1),s=Object(u.a)(o,2),c=s[0],p=s[1],h=function(){p(!1)},g=[],m=[],y=[];return e.data.length>0&&(e.data.map((function(a,t){g.push(r.a.createElement("p",{key:t,className:"category-title"},a.name)),m.push(a.name),a.graphs.length>0&&a.graphs.map((function(a,n){g.push(r.a.createElement(G.a,{key:t+","+n,onClick:function(){return a=t,r=n,e.onGraphChange(a,r),void i(null);var a,r}},a.name)),y.push(a)}))})),a=r.a.createElement(d.a,{color:"inherit",onClick:function(e){i(e.currentTarget)}},"Graphs")),r.a.createElement("div",{className:"header-root"},r.a.createElement(O.a,{position:"static"},r.a.createElement(j.a,null,r.a.createElement(I.a,{className:"leave",onClick:function(){window.location.href="/"}}),r.a.createElement(N.a,{variant:"h6",className:"header-title"},e.title),r.a.createElement(d.a,{color:"inherit",onClick:function(){p(!0)}},"Add"),a,r.a.createElement(_,{open:c,dialogClose:h,categories:m,newGraph:function(a,t,n){e.newGraph(a,t,n),h()}}),r.a.createElement(S.a,{id:"simple-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:function(){i(null)}},g))))},z=t(427),K=t(420),P=t(431),R=function(e){function a(e){var t;return Object(b.a)(this,a),(t=Object(C.a)(this,Object(k.a)(a).call(this,e))).state={},t.getLabel=t.getLabel.bind(Object(w.a)(t)),t}return Object(x.a)(a,e),Object(E.a)(a,[{key:"handleZoom",value:function(e){this.setState({selectedDomain:e})}},{key:"handleBrush",value:function(e){this.setState({zoomDomain:e})}},{key:"getLabel",value:function(){return this.props.gym?"str":this.props.valueType}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"graph-area"},r.a.createElement(z.a,{width:800,height:350,scale:{x:"time"},animate:{duration:500,onLoad:{duration:500}},padding:{left:90,top:50,right:20,bottom:50}},r.a.createElement(K.a,{style:{data:{stroke:"tomato"}},data:this.props.data}),r.a.createElement(P.a,{dependentAxis:!0,tickFormat:function(a){return"".concat(Math.round(a)," ")+e.getLabel()},fixLabelOverlap:!0,style:{axis:{stroke:"black"},ticks:{stroke:"black"},tickLabels:{color:"black",fill:"black"}},standalone:!1}),r.a.createElement(P.a,{standalone:!1,style:{axis:{stroke:"black"}}})))}}]),a}(r.a.Component),Z=t(418);function $(e){var a=r.a.useState(!0),t=Object(u.a)(a,2),n=t[0],l=t[1];return r.a.createElement(D.a,{open:e.open,onClose:e.dialogClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(U.a,null,"Raw data:"),r.a.createElement(V.a,{className:"raw-data-area"},r.a.createElement(g.a,{placeholder:"What have you done? ctrl z asap",multiline:!0,rows:9,rowsMax:15,defaultValue:JSON.stringify(e.data,null,4),fullWidth:!0,helperText:"Change at your own risk",onChange:function(e){0===(J=e.target.value).length?l(!0):l(!1)}})),r.a.createElement(L.a,null,r.a.createElement(d.a,{onClick:e.dialogClose,color:"primary",className:"raw"},"Leave"),r.a.createElement(d.a,{disabled:n,onClick:function(){e.graphUpdate(J),e.dialogClose()},color:"primary"},"Change")))}var Q="kg",X=function(e){function a(e){var t;return Object(b.a)(this,a),(t=Object(C.a)(this,Object(k.a)(a).call(this,e))).dialogClick=function(){t.setState({open:!0})},t.dialogClose=function(){t.setState({open:!1})},t.getLabel=t.getLabel.bind(Object(w.a)(t)),t.state={open:!1},t}return Object(x.a)(a,e),Object(E.a)(a,[{key:"getLabel",value:function(){return this.props.gym?"str":this.props.valueType}},{key:"render",value:function(){return r.a.createElement("div",{className:"stats-area"},r.a.createElement(N.a,{variant:"h6",className:"header-title"},"Stats:"),r.a.createElement(Z.a,null),r.a.createElement("p",null,"Type: ",this.getLabel()),r.a.createElement("p",null,"Last: ",function(e){var a=e.length-1;return e[a].y+" at "+Y(e[a].x)+" "+ee(a,e)}(this.props.data)),r.a.createElement("p",null,"Highest: ",function(e){var a=0,t=0;return e.map((function(e,n){e.y>t&&(t=e.y,a=n)})),t+" at "+Y(e[a].x)+" "+ee(a,e)}(this.props.data)," "),r.a.createElement("p",null,"Lowest: ",function(e){var a=0,t=e[0].y;return e.map((function(e,n){e.y<t&&(t=e.y,a=n)})),t+" at "+Y(e[a].x)+" "+ee(a,e)}(this.props.data)," "),r.a.createElement("p",null,"Average: ",(e=this.props.data).reduce((function(e,a){return e+a.y}),0)/e.length," "),r.a.createElement(d.a,{color:"primary",variant:"contained",onClick:this.dialogClick},"Raw Data"),r.a.createElement($,{open:this.state.open,dialogClose:this.dialogClose,title:this.props.title,data:this.props.data,graphUpdate:this.props.graphUpdate}));var e}}]),a}(r.a.Component);function Y(e){return e.toLocaleDateString("en-gb")}function ee(e,a){var t="";if(a[e].special_data){var n=a[e].special_data;t+=" | weight: "+n.weight+" "+Q,t+=", reps: "+n.reps,t+=", sets: "+n.sets}return t}var ae,te,ne,re=t(419),le=t(215),ie=t.n(le),oe=t(219),se=t(31),ce=t(423),pe=0,ue=0,he=!1,ge=function(e){function a(e){var t;return Object(b.a)(this,a),(t=Object(C.a)(this,Object(k.a)(a).call(this,e))).state={date:new Date},t.handleDateChange=t.handleDateChange.bind(Object(w.a)(t)),t.handleNormalForm=t.handleNormalForm.bind(Object(w.a)(t)),t}return Object(x.a)(a,e),Object(E.a)(a,[{key:"handleDateChange",value:function(e){this.setState({date:e})}},{key:"handleNormalForm",value:function(e){pe=de(e.target.value)}},{key:"onSubmit",value:function(){this.props.gym?(ae=de(ae),te=de(te),ue=de(ue),console.log(te),0!==te?(console.log("i leave"),pe=ae*(te/30+1)*ue):pe=0,he=!0,ne={weight:ae,reps:te,sets:ue}):(he=!1,ne={}),this.props.newValue(this.state.date,pe,this.props.category,this.props.graph,he,ne)}},{key:"render",value:function(){var e,a=this,t=[];return this.props.gym?(t.push(r.a.createElement(g.a,{key:"annoyingshit1",label:"weight(kg)",variant:"outlined",type:"number",id:"weight",onChange:function(e){return ae=e.target.value},style:{margin:"0 0 0 0",width:"25%"},helperText:"example: 20"})),t.push(r.a.createElement(g.a,{key:"annoyingshit2",label:"reps",variant:"outlined",type:"number",id:"reps",onChange:function(e){return te=e.target.value},style:{margin:"0 0 0 20px",width:"25%"},helperText:"example: 8"})),t.push(r.a.createElement(g.a,{key:"annoyingshit3 ",label:"sets",variant:"outlined",type:"number",id:"sets",onChange:function(e){return ue=e.target.value},style:{margin:"0 0 0 20px",width:"25%"},helperText:"example: 3"})),e=r.a.createElement("div",{className:"form-formula"},t)):e=r.a.createElement(g.a,{style:{padding:"0 0 0 0"},required:!this.props.gym,label:"Value",variant:"outlined",fullWidth:!0,type:"number",onChange:this.handleNormalForm}),r.a.createElement("div",null,r.a.createElement(D.a,{open:this.props.open,onClose:this.props.dialogClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(U.a,{id:"form-dialog-title"},"Add value to ",this.props.title),r.a.createElement(V.a,null,r.a.createElement(H.a,null,"Add some value"),r.a.createElement(se.a,{utils:oe.a},r.a.createElement(ce.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:"time",value:this.state.date,fullWidth:!0,onChange:this.handleDateChange,style:{padding:"0 0 30px 0"},KeyboardButtonProps:{"aria-label":"change date"}})),e),r.a.createElement(L.a,null,r.a.createElement(d.a,{onClick:this.props.dialogClose,color:"primary"},"nah"),r.a.createElement(d.a,{onClick:function(){return a.onSubmit()},color:"primary"},"Add"))))}}]),a}(r.a.Component);function de(e){return e=parseInt(e),isNaN(e)?0:e}function me(e){var a=r.a.useState(!1),t=Object(u.a)(a,2),n=t[0],l=t[1];return r.a.createElement("div",{className:"add-div"},r.a.createElement(re.a,{color:"primary","aria-label":"add",onClick:function(){l(!0)}},r.a.createElement(ie.a,null)),r.a.createElement(ge,{open:n,dialogClose:function(){l(!1)},title:e.title,newValue:function(a,t,n,r,l,i){e.newValue(a,t,n,r,l,i)},category:e.category,graph:e.graph,gym:e.gym}))}var ye=t(216),fe=t.n(ye);function ve(e){return r.a.createElement(D.a,{open:e.open,onClose:e.dialogClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(U.a,null,"Delete ",e.title,"?"),r.a.createElement(L.a,null,r.a.createElement(d.a,{onClick:e.dialogClose,color:"primary",className:"raw"},"No"),r.a.createElement(d.a,{onClick:e.dialogDone,color:"primary"},"Delete")))}function be(e){var a=r.a.useState(!1),t=Object(u.a)(a,2),n=t[0],l=t[1];return r.a.createElement("div",{className:"options",dir:"rtl"},r.a.createElement(fe.a,{onClick:function(){l(!0)}}),r.a.createElement(ve,{open:n,dialogClose:function(){l(!1)},dialogDone:function(){e.delete(),l(!1)},title:e.title}))}var Ee=function(e){function a(e){return Object(b.a)(this,a),Object(C.a)(this,Object(k.a)(a).call(this,e))}return Object(x.a)(a,e),Object(E.a)(a,[{key:"isGym",value:function(){return"gym"===this.props.valueType}},{key:"render",value:function(){var e=r.a.createElement("div",{className:"stats-area"},"Add some values to graph");return this.props.data.length>0&&(e=r.a.createElement(X,{valueType:this.props.valueType,data:this.props.data,gym:this.isGym(),graphUpdate:this.props.graphUpdate})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content"},r.a.createElement(R,{data:this.props.data,valueType:this.props.valueType,gym:this.isGym()}),r.a.createElement(be,{delete:this.props.delete,title:this.props.title}),e),r.a.createElement(me,{title:this.props.title,newValue:this.props.newValue,category:this.props.category,graph:this.props.graph,gym:this.isGym()}))}}]),a}(r.a.Component);function Ce(e){return r.a.createElement("div",{className:"nothing"},r.a.createElement(h.a,{className:"login-paper"},"Nothing here yet, add a graph!"))}var ke=[],we=function(e){function a(e){var t;return Object(b.a)(this,a),t=Object(C.a)(this,Object(k.a)(a).call(this,e)),ke.length>0?(t.first=ke[0],t.state={current:{name:t.first.graphs[0].name,type:t.first.graphs[0].type,data:t.first.graphs[0].data,category:0,graph:0}}):t.state={},t.onGraphChange=t.onGraphChange.bind(Object(w.a)(t)),t.newValue=t.newValue.bind(Object(w.a)(t)),t.newGraph=t.newGraph.bind(Object(w.a)(t)),t.delete=t.delete.bind(Object(w.a)(t)),t.graphUpdate=t.graphUpdate.bind(Object(w.a)(t)),t}return Object(x.a)(a,e),Object(E.a)(a,[{key:"componentDidMount",value:function(){var e;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(Oe());case 2:e=a.sent,(ke=e).map((function(e){e.graphs.map((function(e){e.data.map((function(e){e.x=new Date(e.x)}))}))})),ke.length>0&&(this.first=ke[0],this.setState({current:{name:this.first.graphs[0].name,type:this.first.graphs[0].type,data:this.first.graphs[0].data,category:0,graph:0}})),document.title="Progress View";case 7:case"end":return a.stop()}}),null,this)}},{key:"newValue",value:function(e,a,t,n,r,l){return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r?ke[t].graphs[n].data.push({x:e,y:parseInt(a),special_data:l}):ke[t].graphs[n].data.push({x:e,y:parseInt(a)}),i.next=3,p.a.awrap(je(ke));case 3:this.setState({current:{name:ke[t].graphs[n].name,type:ke[t].graphs[n].type,data:ke[t].graphs[n].data,category:t,graph:n}});case 4:case"end":return i.stop()}}),null,this)}},{key:"newGraph",value:function(e,a,t){var n,r,l;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=xe(e,a,t),r=n.category_index,l=n.graph_index,i.next=5,p.a.awrap(je(ke));case 5:this.setState({current:{name:ke[r].graphs[l].name,type:ke[r].graphs[l].type,data:ke[r].graphs[l].data,category:r,graph:l}});case 6:case"end":return i.stop()}}),null,this)}},{key:"onGraphChange",value:function(e,a){this.setState({current:{name:ke[e].graphs[a].name,type:ke[e].graphs[a].type,data:ke[e].graphs[a].data,category:e,graph:a}})}},{key:"delete",value:function(){var e,a,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.state.current.category,a=this.state.current.graph,ke[e].graphs.splice(a,1),0===ke[e].graphs.length&&ke.splice(e,1),n.next=6,p.a.awrap(je(ke));case 6:ke.length>0?(t=ke[0],this.setState({current:{name:t.graphs[0].name,type:t.graphs[0].type,data:t.graphs[0].data,category:0,graph:0}})):this.setState({nothing:!0});case 7:case"end":return n.stop()}}),null,this)}},{key:"graphUpdate",value:function(e){var a,t,n,r;return p.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:l.prev=0,a=JSON.parse(e),l.next=7;break;case 4:return l.prev=4,l.t0=l.catch(0),l.abrupt("return");case 7:return a.map((function(e){e.x=new Date(e.x)})),t=this.state.current.category,n=this.state.current.graph,ke[t].graphs[n].data=a,r=ke[t].graphs[n],l.next=14,p.a.awrap(je(ke));case 14:this.setState({current:{name:r.name,type:r.type,data:a,category:t,graph:n}});case 15:case"end":return l.stop()}}),null,this,[[0,4]])}},{key:"render",value:function(){var e=r.a.createElement(Ce,null),a=r.a.createElement(q,{title:"",onGraphChange:this.onGraphChange,data:ke,newGraph:this.newGraph});return ke.length>0&&(e=r.a.createElement(Ee,{data:this.state.current.data,title:this.state.current.name,newValue:this.newValue,category:this.state.current.category,graph:this.state.current.graph,valueType:this.state.current.type,delete:this.delete,graphUpdate:this.graphUpdate}),a=r.a.createElement(q,{title:this.state.current.name,onGraphChange:this.onGraphChange,data:ke,newGraph:this.newGraph})),r.a.createElement(r.a.Fragment,null,a,e)}}]),a}(r.a.Component);function xe(e,a,t){var n=!0,r=0,l=0;if(ke.map((function(i,o){i.name===e&&(l=ke[o].graphs.length,r=o,n=!1,ke[o].graphs.push({name:a,type:t,data:[]}))})),n){r=ke.length;var i=[{name:a,type:t,data:[]}];ke.push({name:e,graphs:i})}return{category_index:r,graph_index:l}}function Oe(){var e;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p.a.awrap(y.a.get("/api"));case 3:if(!(e=a.sent).status){a.next=8;break}return a.abrupt("return",e.data.data);case 8:alert("error");case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),alert("error contacting server");case 14:return a.abrupt("return",[]);case 15:case"end":return a.stop()}}),null,null,[[0,11]])}function je(e){var a;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.awrap(y.a.post("/api/update",{data:e}));case 3:(a=t.sent).status?console.log(a.data.msg):alert("error"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("error contacting server");case 10:case"end":return t.stop()}}),null,null,[[0,7]])}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(){return r.a.createElement(o.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:v}),r.a.createElement(s.a,{path:"/app",component:we})))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[236,1,2]]]);
//# sourceMappingURL=main.7c77e6e8.chunk.js.map