(this["webpackJsonpprogress-view"]=this["webpackJsonpprogress-view"]||[]).push([[0],{234:function(e,a,t){e.exports=t(364)},239:function(e,a,t){},34:function(e,a,t){},364:function(e,a,t){"use strict";t.r(a);var n,r=t(0),l=t.n(r),o=t(16),i=t.n(o),s=(t(239),t(34),t(217)),c=t(69),p=t(29),u=t.n(p),h=t(23),g=t(365),d=t(421),m=t(409),y=t(100),v=t.n(y);function f(e){var a=l.a.useState(!0),t=Object(h.a)(a,2),r=t[0],o=t[1];return l.a.useEffect((function(){document.title="Login"})),l.a.createElement("div",{className:"login-page"},l.a.createElement(g.a,{className:"login-paper"},l.a.createElement("div",{className:"login-content"},l.a.createElement(d.a,{label:"Name",variant:"outlined",fullWidth:!0,onChange:function(e){0===(n=e.target.value).length?o(!0):o(!1)},autoFocus:!0})),l.a.createElement("div",{className:"login-actions"},l.a.createElement(m.a,{variant:"contained",color:"primary",disabled:r,onClick:function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.awrap(v.a.post("/api/auth",{user:n}));case 3:e.sent.status?window.location.href="/app":alert("error"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("error");case 10:case"end":return e.stop()}}),null,null,[[0,7]])}},"Enter"))))}var E=t(21),b=t(17),C=t(24),k=t(25),w=t(20),O=t(26),x=t(415),S=t(416),T=t(222),j=t(220),N=t(432),G=t(424),A=t(429),D=t(414),U=t(411),F=t(412),V=t(410),H="",L="",I="",W=!0,R=function(e){function a(e){var t;return Object(E.a)(this,a),(t=Object(C.a)(this,Object(k.a)(a).call(this,e))).state={categoryHelper:"",categoryError:!1,graphHelper:"",graphError:!1},t}return Object(O.a)(a,e),Object(b.a)(a,[{key:"onCategorySelect",value:function(e,a){null!=a?(this.setState({categoryHelper:"",categoryError:!1}),H=a,W=!this.isValid()):(W=!0,H="")}},{key:"onChangeCategory",value:function(e){e.target.value.length>0?(this.setState({categoryHelper:"",categoryError:!1}),W=!1,H=e.target.value,W=!this.isValid()):(this.setState({categoryHelper:"give it a name",categoryError:!0}),W=!0,H="")}},{key:"onChangeGraph",value:function(e){e.target.value.length>0?(this.setState({graphHelper:"",graphError:!1}),L=e.target.value,W=!this.isValid()):(this.setState({graphHelper:"give it a name",graphError:!0}),W=!0,L="")}},{key:"isValid",value:function(){return H.length>0&&L.length>0}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(A.a,{open:this.props.open,onClose:this.props.dialogClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(V.a,{id:"form-dialog-title"},"Add graph"),l.a.createElement(U.a,null,l.a.createElement(F.a,null,"Make a new graph"),l.a.createElement(G.a,{id:"category",options:this.props.categories,getOptionLabel:function(e){return e},style:{padding:"0 0 30px 0"},freeSolo:!0,onChange:this.onCategorySelect.bind(this),renderInput:function(a){return l.a.createElement(d.a,Object.assign({},a,{required:!0,label:"Category",variant:"outlined",fullWidth:!0,error:e.state.categoryError,helperText:e.state.categoryHelper,onChange:e.onChangeCategory.bind(e)}))}}),l.a.createElement(d.a,{required:!0,label:"Graph",variant:"outlined",fullWidth:!0,style:{padding:"0 0 30px 0"},error:this.state.graphError,helperText:this.state.graphHelper,onChange:this.onChangeGraph.bind(this)}),l.a.createElement(d.a,{label:"type",variant:"outlined",fullWidth:!0,helperText:"example: kg, minutes",onChange:function(e){return I=e.target.value}})),l.a.createElement(D.a,null,l.a.createElement(m.a,{onClick:this.props.dialogClose,color:"primary"},"nah"),l.a.createElement(m.a,{onClick:function(){return e.props.newGraph(H,L,I)},disabled:W,color:"primary"},"Create"))))}}]),a}(l.a.Component);var K,M=function(e){var a=l.a.useState(null),t=Object(h.a)(a,2),n=t[0],r=t[1],o=l.a.useState(!1),i=Object(h.a)(o,2),s=i[0],c=i[1],p=function(){c(!1)},u=[],g=[],d=[];return e.data.map((function(a,t){u.push(l.a.createElement("p",{key:t,className:"category-title"},a.name)),g.push(a.name),a.graphs.length>0&&a.graphs.map((function(a,n){u.push(l.a.createElement(N.a,{key:t+","+n,onClick:function(){return a=t,l=n,e.onGraphChange(a,l),void r(null);var a,l}},a.name)),d.push(a)}))})),l.a.createElement("div",{className:"header-root"},l.a.createElement(x.a,{position:"static"},l.a.createElement(S.a,null,l.a.createElement(T.a,{variant:"h6",className:"logo-title"},"Hey"),l.a.createElement(T.a,{variant:"h6",className:"header-title"},e.title),l.a.createElement(m.a,{color:"inherit",onClick:function(){c(!0)}},"Add"),l.a.createElement(m.a,{color:"inherit",onClick:function(e){r(e.currentTarget)}},"Graphs"),l.a.createElement(R,{open:s,dialogClose:p,categories:g,newGraph:function(a,t,n){e.newGraph(a,t,n),p()}}),l.a.createElement(j.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){r(null)}},u))))},P=t(426),_=t(419),B=t(430),J=function(e){function a(e){var t;return Object(E.a)(this,a),(t=Object(C.a)(this,Object(k.a)(a).call(this,e))).state={},t.getLabel=t.getLabel.bind(Object(w.a)(t)),t}return Object(O.a)(a,e),Object(b.a)(a,[{key:"handleZoom",value:function(e){this.setState({selectedDomain:e})}},{key:"handleBrush",value:function(e){this.setState({zoomDomain:e})}},{key:"getLabel",value:function(){return this.props.gym?"volume":this.props.valueType}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"graph-area"},l.a.createElement(P.a,{width:800,height:350,scale:{x:"time"},animate:{duration:500,onLoad:{duration:500}},padding:{left:90,top:50,right:20,bottom:50}},l.a.createElement(_.a,{style:{data:{stroke:"tomato"}},data:this.props.data}),l.a.createElement(B.a,{dependentAxis:!0,tickFormat:function(a){return"".concat(Math.round(a)," ")+e.getLabel()},fixLabelOverlap:!0,style:{axis:{stroke:"black"},ticks:{stroke:"black"},tickLabels:{color:"black",fill:"black"}},standalone:!1}),l.a.createElement(B.a,{standalone:!1,style:{axis:{stroke:"black"}}})))}}]),a}(l.a.Component),q=t(417);function z(e){var a=l.a.useState(!0),t=Object(h.a)(a,2),n=t[0],r=t[1],o=l.a.useState(JSON.stringify(e.data,null,4)),i=Object(h.a)(o,2),s=i[0],c=i[1];return l.a.createElement(A.a,{open:e.open,onClose:e.dialogClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(V.a,null,"Raw data:"),l.a.createElement(U.a,{className:"raw-data-area"},l.a.createElement(d.a,{placeholder:"What have you done? ctrl z asap",multiline:!0,rows:9,rowsMax:15,value:s,fullWidth:!0,helperText:"Change at your own risk",onChange:function(e){K=e.target.value,c(K),0===K.length?r(!0):r(!1)}})),l.a.createElement(D.a,null,l.a.createElement(m.a,{onClick:e.dialogClose,color:"primary",className:"raw"},"Leave"),l.a.createElement(m.a,{disabled:n,onClick:function(){e.graphUpdate(K),e.dialogClose()},color:"primary"},"Change")))}var Z="kg",$=function(e){function a(e){var t;return Object(E.a)(this,a),(t=Object(C.a)(this,Object(k.a)(a).call(this,e))).dialogClick=function(){t.setState({open:!0})},t.dialogClose=function(){t.setState({open:!1})},t.getLabel=t.getLabel.bind(Object(w.a)(t)),t.state={open:!1},t}return Object(O.a)(a,e),Object(b.a)(a,[{key:"getLabel",value:function(){return this.props.gym?"volume":this.props.valueType}},{key:"render",value:function(){return l.a.createElement("div",{className:"stats-area"},l.a.createElement(T.a,{variant:"h6",className:"header-title"},"Stats:"),l.a.createElement(q.a,null),l.a.createElement("p",null,"Type: ",this.getLabel()),l.a.createElement("p",null,"Last: ",function(e){var a=e.length-1;return e[a].y+" at "+Q(e[a].x)+" "+X(a,e)}(this.props.data)),l.a.createElement("p",null,"Highest: ",function(e){var a=0,t=0;return e.map((function(e,n){e.y>t&&(t=e.y,a=n)})),t+" at "+Q(e[a].x)+" "+X(a,e)}(this.props.data)," "),l.a.createElement("p",null,"Lowest: ",function(e){var a=0,t=e[0].y;return e.map((function(e,n){e.y<t&&(t=e.y,a=n)})),t+" at "+Q(e[a].x)+" "+X(a,e)}(this.props.data)," "),l.a.createElement("p",null,"Average: ",(e=this.props.data).reduce((function(e,a){return e+a.y}),0)/e.length," "),l.a.createElement(m.a,{color:"primary",variant:"contained",onClick:this.dialogClick},"Raw Data"),l.a.createElement(z,{open:this.state.open,dialogClose:this.dialogClose,title:this.props.title,data:this.props.data,graphUpdate:this.props.graphUpdate}));var e}}]),a}(l.a.Component);function Q(e){return e.toLocaleDateString("en-gb")}function X(e,a){var t="";if(a[e].special_data){var n=a[e].special_data;t+=" | weight: "+n.weight+" "+Z,t+=", reps: "+n.reps,t+=", sets: "+n.sets}return t}var Y,ee,ae,te=t(418),ne=t(215),re=t.n(ne),le=t(219),oe=t(31),ie=t(422),se=0,ce=0,pe=!1,ue=function(e){function a(e){var t;return Object(E.a)(this,a),(t=Object(C.a)(this,Object(k.a)(a).call(this,e))).state={date:new Date},t.handleDateChange=t.handleDateChange.bind(Object(w.a)(t)),t.handleSpecialForm=t.handleSpecialForm.bind(Object(w.a)(t)),t.handleNormalForm=t.handleNormalForm.bind(Object(w.a)(t)),t}return Object(O.a)(a,e),Object(b.a)(a,[{key:"handleDateChange",value:function(e){this.setState({date:e})}},{key:"handleSpecialForm",value:function(e){e.target.id}},{key:"handleNormalForm",value:function(e){se=he(e.target.value)}},{key:"onSubmit",value:function(){this.props.gym?(Y=he(Y),ee=he(ee),ce=he(ce),se=Y*ee*ce,pe=!0,ae={weight:Y,reps:ee,sets:ce}):(pe=!1,ae={}),this.props.newValue(this.state.date,se,this.props.category,this.props.graph,pe,ae)}},{key:"render",value:function(){var e,a=this,t=[];return this.props.gym?(t.push(l.a.createElement(d.a,{key:"annoyingshit1",label:"weight(kg)",variant:"outlined",type:"number",id:"weight",onChange:function(e){return Y=e.target.value},style:{margin:"0 0 0 0",width:"25%"},helperText:"example: 20"})),t.push(l.a.createElement(d.a,{key:"annoyingshit2",label:"reps",variant:"outlined",type:"number",id:"reps",onChange:function(e){return ee=e.target.value},style:{margin:"0 0 0 20px",width:"25%"},helperText:"example: 8"})),t.push(l.a.createElement(d.a,{key:"annoyingshit3 ",label:"sets",variant:"outlined",type:"number",id:"sets",onChange:function(e){return ce=e.target.value},style:{margin:"0 0 0 20px",width:"25%"},helperText:"example: 3"})),e=l.a.createElement("div",{className:"form-formula"},t)):e=l.a.createElement(d.a,{style:{padding:"0 0 0 0"},required:!this.props.gym,label:"Value",variant:"outlined",fullWidth:!0,type:"number",onChange:this.handleNormalForm}),l.a.createElement("div",null,l.a.createElement(A.a,{open:this.props.open,onClose:this.props.dialogClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(V.a,{id:"form-dialog-title"},"Add value to ",this.props.title),l.a.createElement(U.a,null,l.a.createElement(F.a,null,"Add some value"),l.a.createElement(oe.a,{utils:le.a},l.a.createElement(ie.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:"time",value:this.state.date,fullWidth:!0,onChange:this.handleDateChange,style:{padding:"0 0 30px 0"},KeyboardButtonProps:{"aria-label":"change date"}})),e),l.a.createElement(D.a,null,l.a.createElement(m.a,{onClick:this.props.dialogClose,color:"primary"},"nah"),l.a.createElement(m.a,{onClick:function(){return a.onSubmit()},color:"primary"},"Add"))))}}]),a}(l.a.Component);function he(e){return e=parseInt(e),isNaN(e)?0:e}function ge(e){var a=l.a.useState(!1),t=Object(h.a)(a,2),n=t[0],r=t[1];return l.a.createElement("div",{className:"add-div"},l.a.createElement(te.a,{color:"primary","aria-label":"add",onClick:function(){r(!0)}},l.a.createElement(re.a,null)),l.a.createElement(ue,{open:n,dialogClose:function(){r(!1)},title:e.title,newValue:function(a,t,n,r,l,o){e.newValue(a,t,n,r,l,o)},category:e.category,graph:e.graph,gym:e.gym}))}var de=t(216),me=t.n(de);function ye(e){return l.a.createElement(A.a,{open:e.open,onClose:e.dialogClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(V.a,null,"Delete ",e.title,"?"),l.a.createElement(D.a,null,l.a.createElement(m.a,{onClick:e.dialogClose,color:"primary",className:"raw"},"No"),l.a.createElement(m.a,{onClick:e.dialogDone,color:"primary"},"Delete")))}function ve(e){var a=l.a.useState(!1),t=Object(h.a)(a,2),n=t[0],r=t[1];return l.a.createElement("div",{className:"options",dir:"rtl"},l.a.createElement(me.a,{onClick:function(){r(!0)}}),l.a.createElement(ye,{open:n,dialogClose:function(){r(!1)},dialogDone:function(){e.delete(),r(!1)},title:e.title}))}var fe=function(e){function a(e){return Object(E.a)(this,a),Object(C.a)(this,Object(k.a)(a).call(this,e))}return Object(O.a)(a,e),Object(b.a)(a,[{key:"isGym",value:function(){return"gym"===this.props.valueType}},{key:"render",value:function(){var e=l.a.createElement("div",{className:"stats-area"},"Add some values to graph");return this.props.data.length>0&&(e=l.a.createElement($,{valueType:this.props.valueType,data:this.props.data,gym:this.isGym(),graphUpdate:this.props.graphUpdate})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"content"},l.a.createElement(J,{data:this.props.data,valueType:this.props.valueType,gym:this.isGym()}),l.a.createElement(ve,{delete:this.props.delete,title:this.props.title}),e),l.a.createElement(ge,{title:this.props.title,newValue:this.props.newValue,category:this.props.category,graph:this.props.graph,gym:this.isGym()}))}}]),a}(l.a.Component);function Ee(e){return l.a.createElement("div",{className:"nothing"},l.a.createElement(g.a,{className:"login-paper"},"Nothing here yet, add a graph!"))}var be=[],Ce=function(e){function a(e){var t;return Object(E.a)(this,a),(t=Object(C.a)(this,Object(k.a)(a).call(this,e))).state={},t.onGraphChange=t.onGraphChange.bind(Object(w.a)(t)),t.newValue=t.newValue.bind(Object(w.a)(t)),t.newGraph=t.newGraph.bind(Object(w.a)(t)),t.delete=t.delete.bind(Object(w.a)(t)),t.graphUpdate=t.graphUpdate.bind(Object(w.a)(t)),t}return Object(O.a)(a,e),Object(b.a)(a,[{key:"componentDidMount",value:function(){var e;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("MOUNTED"),a.next=3,u.a.awrap(we());case 3:e=a.sent,console.log("GOT DATA"),console.log(e),(be=e).map((function(e){e.graphs.map((function(e){e.data.map((function(e){e.x=new Date(e.x)}))}))})),console.log("i FUCKING HATE THIS SHIT SO "),console.log(be),console.log(be.length),console.log("SO UPDATE THE FUCKING STATE ... NOW? "),be.length>0&&(this.first=be[0],this.setState({current:{name:this.first.graphs[0].name,type:this.first.graphs[0].type,data:this.first.graphs[0].data,category:0,graph:0}})),console.log("DONE?? FKING SHIT"),document.title="Progress View";case 15:case"end":return a.stop()}}),null,this)}},{key:"newValue",value:function(e,a,t,n,r,l){return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return r?be[t].graphs[n].data.push({x:e,y:parseInt(a),special_data:l}):be[t].graphs[n].data.push({x:e,y:parseInt(a)}),o.next=3,u.a.awrap(Oe(be));case 3:this.setState({current:{name:be[t].graphs[n].name,type:be[t].graphs[n].type,data:be[t].graphs[n].data,category:t,graph:n}}),console.log(be);case 5:case"end":return o.stop()}}),null,this)}},{key:"newGraph",value:function(e,a,t){var n,r,l;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=ke(e,a,t),r=n.category_index,l=n.graph_index,o.next=5,u.a.awrap(Oe(be));case 5:this.setState({current:{name:be[r].graphs[l].name,type:be[r].graphs[l].type,data:be[r].graphs[l].data,category:r,graph:l}});case 6:case"end":return o.stop()}}),null,this)}},{key:"onGraphChange",value:function(e,a){this.setState({current:{name:be[e].graphs[a].name,type:be[e].graphs[a].type,data:be[e].graphs[a].data,category:e,graph:a}})}},{key:"delete",value:function(){var e,a,t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.state.current.category,a=this.state.current.graph,be[e].graphs.splice(a,1),0===be[e].graphs.length&&be.splice(e,1),n.next=6,u.a.awrap(Oe(be));case 6:be.length>0?(t=be[0],this.setState({current:{name:t.graphs[0].name,type:t.graphs[0].type,data:t.graphs[0].data,category:0,graph:0}})):this.setState({nothing:!0});case 7:case"end":return n.stop()}}),null,this)}},{key:"graphUpdate",value:function(e){var a,t,n,r;return u.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:console.log("GRAPH UPDATE"),l.prev=1,a=JSON.parse(e),l.next=9;break;case 5:return l.prev=5,l.t0=l.catch(1),console.log("Invalid json from raw data option. >> "+l.t0),l.abrupt("return");case 9:return a.map((function(e){e.x=new Date(e.x)})),t=this.state.current.category,n=this.state.current.graph,be[t].graphs[n].data=a,r=be[t].graphs[n],console.log("GONA SAVE DATA"),l.next=17,u.a.awrap(Oe(be));case 17:console.log("GONA SET STATE"),this.setState({current:{name:r.name,type:r.type,data:a,category:t,graph:n}});case 19:case"end":return l.stop()}}),null,this,[[1,5]])}},{key:"render",value:function(){var e=l.a.createElement(Ee,null),a=l.a.createElement(M,{title:"",onGraphChange:this.onGraphChange,data:be,newGraph:this.newGraph});return console.log("================================"),console.log(be),console.log("================================"),be.length>0&&(e=l.a.createElement(fe,{data:this.state.current.data,title:this.state.current.name,newValue:this.newValue,category:this.state.current.category,graph:this.state.current.graph,valueType:this.state.current.type,delete:this.delete,graphUpdate:this.graphUpdate}),a=l.a.createElement(M,{title:this.state.current.name,onGraphChange:this.onGraphChange,data:be,newGraph:this.newGraph})),l.a.createElement(l.a.Fragment,null,a,e)}}]),a}(l.a.Component);function ke(e,a,t){var n=!0,r=0,l=0;if(be.map((function(o,i){o.name===e&&(l=be[i].graphs.length,r=i,n=!1,be[i].graphs.push({name:a,type:t,data:[]}))})),n){r=be.length;var o=[{name:a,type:t,data:[]}];be.push({name:e,graphs:o})}return{category_index:r,graph_index:l}}function we(){var e;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("GET DATA"),a.prev=1,a.next=4,u.a.awrap(v.a.get("/api"));case 4:if(e=a.sent,console.log("GOT FUCKING RES FOR GET DATA"),console.log(e),!e.status){a.next=13;break}return console.log("STATUS OK FOR GET DATA"),console.log(e.data.data),a.abrupt("return",e.data.data);case 13:alert("error");case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(1),alert("error contacting server");case 19:return a.abrupt("return",[]);case 20:case"end":return a.stop()}}),null,null,[[1,16]])}function Oe(e){var a;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("SAVE DATA"),t.prev=1,t.next=4,u.a.awrap(v.a.post("/api/update",{data:e}));case 4:a=t.sent,console.log("GOT FUCKING RES FOR UPDATE DATA"),console.log(a),a.status?(console.log("GOT FUCKING STATUS FOR UPDATE DATA"),console.log(a.status),console.log(a.msg)):alert("error"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),alert("error contacting server");case 13:case"end":return t.stop()}}),null,null,[[1,10]])}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement((function(){return l.a.createElement(s.a,null,l.a.createElement(c.c,null,l.a.createElement(c.a,{exact:!0,path:"/",component:f}),l.a.createElement(c.a,{path:"/app",component:Ce})))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[234,1,2]]]);
//# sourceMappingURL=main.231eb6b7.chunk.js.map